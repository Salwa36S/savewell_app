{"ast":null,"code":"// client/src/Features/UserSlice.js\nimport{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";// Initial state\nconst initialState={user:{},isLoading:false,isSuccess:false,isError:false,errorMessage:\"\"};// âœ… Thunk for user registration\nexport const registerUser=createAsyncThunk(\"users/registerUser\",async(userData,_ref)=>{let{rejectWithValue}=_ref;try{const response=await axios.post(\"http://localhost:3001/registerUser\",userData);return response.data.user;}catch(error){var _error$response,_error$response$data;return rejectWithValue(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);}});// âœ… Thunk for user login\nexport const login=createAsyncThunk(\"users/login\",async(userData,_ref2)=>{let{rejectWithValue}=_ref2;try{const response=await axios.post(\"http://localhost:3001/login\",userData);return response.data.user;}catch(error){var _error$response2,_error$response2$data;return rejectWithValue(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||\"Invalid credentials\");}});// âœ… Thunk for updating user profile (with FormData)\nexport const updateUserProfile=createAsyncThunk(\"users/updateUserProfile\",async(userData,_ref3)=>{let{rejectWithValue}=_ref3;try{const response=await axios.put(`http://localhost:3001/updateUserProfile/${userData.get(\"email\")}`,// Email from FormData\nuserData,{headers:{\"Content-Type\":\"multipart/form-data\"}});return response.data.user;}catch(error){var _error$response3,_error$response3$data;return rejectWithValue(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||\"Profile update failed\");}});// ðŸ›  User slice\nexport const userSlice=createSlice({name:\"users\",initialState,reducers:{logout:state=>{state.user={};state.isLoading=false;state.isSuccess=false;state.isError=false;state.errorMessage=\"\";},resetState:state=>{state.isLoading=false;state.isSuccess=false;state.isError=false;state.errorMessage=\"\";}},extraReducers:builder=>{builder// ðŸ›  Register\n.addCase(registerUser.pending,state=>{state.isLoading=true;}).addCase(registerUser.fulfilled,(state,action)=>{state.isLoading=false;state.isSuccess=true;state.user=action.payload;}).addCase(registerUser.rejected,(state,action)=>{state.isLoading=false;state.isError=true;state.errorMessage=action.payload;})// ðŸ›  Login\n.addCase(login.pending,state=>{state.isLoading=true;}).addCase(login.fulfilled,(state,action)=>{state.isLoading=false;state.isSuccess=true;state.user=action.payload;}).addCase(login.rejected,(state,action)=>{state.isLoading=false;state.isError=true;state.errorMessage=action.payload;})// ðŸ›  Update Profile\n.addCase(updateUserProfile.pending,state=>{state.isLoading=true;}).addCase(updateUserProfile.fulfilled,(state,action)=>{state.isLoading=false;state.isSuccess=true;state.user=action.payload;}).addCase(updateUserProfile.rejected,(state,action)=>{state.isLoading=false;state.isError=true;state.errorMessage=action.payload;});}});// ðŸ›  Export reducers\nexport const{logout,resetState}=userSlice.actions;// ðŸ›  Export user reducer\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","user","isLoading","isSuccess","isError","errorMessage","registerUser","userData","_ref","rejectWithValue","response","post","data","error","_error$response","_error$response$data","message","login","_ref2","_error$response2","_error$response2$data","updateUserProfile","_ref3","put","get","headers","_error$response3","_error$response3$data","userSlice","name","reducers","logout","state","resetState","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/dell/OneDrive - University of Technology and Applied Sciences/Desktop/SaveWell_app/client/src/Features/UserSlice.js"],"sourcesContent":["// client/src/Features/UserSlice.js\n\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\n// Initial state\nconst initialState = {\n  user: {},\n  isLoading: false,\n  isSuccess: false,\n  isError: false,\n  errorMessage: \"\",\n};\n\n// âœ… Thunk for user registration\nexport const registerUser = createAsyncThunk(\n  \"users/registerUser\",\n  async (userData, { rejectWithValue }) => {\n    try {\n      const response = await axios.post(\"http://localhost:3001/registerUser\", userData);\n      return response.data.user;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || error.message);\n    }\n  }\n);\n\n// âœ… Thunk for user login\nexport const login = createAsyncThunk(\n  \"users/login\",\n  async (userData, { rejectWithValue }) => {\n    try {\n      const response = await axios.post(\"http://localhost:3001/login\", userData);\n      return response.data.user;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || \"Invalid credentials\");\n    }\n  }\n);\n\n// âœ… Thunk for updating user profile (with FormData)\nexport const updateUserProfile = createAsyncThunk(\n  \"users/updateUserProfile\",\n  async (userData, { rejectWithValue }) => {\n    try {\n      const response = await axios.put(\n        `http://localhost:3001/updateUserProfile/${userData.get(\"email\")}`, // Email from FormData\n        userData,\n        { headers: { \"Content-Type\": \"multipart/form-data\" } }\n      );\n      return response.data.user;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || \"Profile update failed\");\n    }\n  }\n);\n\n// ðŸ›  User slice\nexport const userSlice = createSlice({\n  name: \"users\",\n  initialState,\n  reducers: {\n    logout: (state) => {\n      state.user = {};\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = false;\n      state.errorMessage = \"\";\n    },\n    resetState: (state) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = false;\n      state.errorMessage = \"\";\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // ðŸ›  Register\n      .addCase(registerUser.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(registerUser.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.user = action.payload;\n      })\n      .addCase(registerUser.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.errorMessage = action.payload;\n      })\n\n      // ðŸ›  Login\n      .addCase(login.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.user = action.payload;\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.errorMessage = action.payload;\n      })\n\n      // ðŸ›  Update Profile\n      .addCase(updateUserProfile.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(updateUserProfile.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.user = action.payload;\n      })\n      .addCase(updateUserProfile.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.errorMessage = action.payload;\n      });\n  },\n});\n\n// ðŸ›  Export reducers\nexport const { logout, resetState } = userSlice.actions;\n\n// ðŸ›  Export user reducer\nexport default userSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}