{"ast":null,"code":"// src/Components/SavingsSummary.js\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import{useSelector}from\"react-redux\";import{Progress,Input,Button,FormGroup,Label,Form,Spinner}from\"reactstrap\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SavingsSummary=()=>{const[entries,setEntries]=useState([]);const[goal,setGoal]=useState(1000);const[newGoal,setNewGoal]=useState(\"\");const[loading,setLoading]=useState(false);const userEmail=useSelector(state=>state.users.user.email);useEffect(()=>{const fetchSavings=async()=>{try{setLoading(true);if(userEmail){const response=await axios.get(`http://localhost:3001/getUserSavings/${userEmail}`);setEntries(response.data);}}catch(error){console.error(\"Error fetching savings data:\",error);}finally{setLoading(false);}};fetchSavings();const savedGoal=localStorage.getItem(`goal_${userEmail}`);if(savedGoal)setGoal(Number(savedGoal));},[userEmail]);const totalRemaining=entries.reduce((acc,curr)=>acc+Number(curr.remaining),0);const progress=goal?(totalRemaining/goal*100).toFixed(2):0;const handleGoalSubmit=e=>{e.preventDefault();if(newGoal>0){setGoal(Number(newGoal));localStorage.setItem(`goal_${userEmail}`,newGoal);setNewGoal(\"\");}else{alert(\"Please enter a valid goal greater than 0.\");}};const handleResetGoal=()=>{localStorage.removeItem(`goal_${userEmail}`);setGoal(1000);alert(\"Goal has been reset to 1000 OMR üêë.\");};const getMotivationalMessage=()=>{if(progress>=100){return\"üéâ Baaa-rilliant! Goal reached! üêëüèÜ\";}else if(progress>=75){return\"üí™ Almost there! Keep shepherding your savings!\";}else if(progress>=50){return\"‚ú® Good progress! Stay woolly and focused!\";}else{return\"üöÄ Keep going, little sheep! üêë You can do it!\";}};return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"30px\"},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"\\uD83D\\uDC11 Savings Summary\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleGoalSubmit,children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"goal\",className:\"mb-2\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Set Your Sheep Savings Goal (OMR):\"})}),/*#__PURE__*/_jsx(Input,{type:\"number\",id:\"goal\",value:newGoal,onChange:e=>setNewGoal(e.target.value),placeholder:\"Enter your new goal...\"})]}),/*#__PURE__*/_jsx(Button,{color:\"primary\",type:\"submit\",className:\"me-2\",children:\"Set Goal\"}),/*#__PURE__*/_jsx(Button,{color:\"danger\",type:\"button\",onClick:handleResetGoal,children:\"Reset Goal\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Spinner,{color:\"primary\"})}):entries.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"No savings data yet. Start saving to see your progress! \\uD83D\\uDC11\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Remaining Saved:\"}),\" OMR \",totalRemaining.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Goal Progress:\"}),\" \",progress,\"%\"]}),/*#__PURE__*/_jsxs(Progress,{value:progress,color:progress>=100?\"success\":progress>=75?\"info\":progress>=50?\"warning\":\"danger\",style:{height:\"25px\",marginBottom:\"10px\"},children:[progress,\"% toward \\uD83D\\uDC11 goal of \",goal,\" OMR\"]}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"18px\",fontWeight:\"bold\",color:\"#4CAF50\",marginTop:\"10px\"},children:getMotivationalMessage()})]})]});};export default SavingsSummary;","map":{"version":3,"names":["React","useEffect","useState","axios","useSelector","Progress","Input","Button","FormGroup","Label","Form","Spinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SavingsSummary","entries","setEntries","goal","setGoal","newGoal","setNewGoal","loading","setLoading","userEmail","state","users","user","email","fetchSavings","response","get","data","error","console","savedGoal","localStorage","getItem","Number","totalRemaining","reduce","acc","curr","remaining","progress","toFixed","handleGoalSubmit","e","preventDefault","setItem","alert","handleResetGoal","removeItem","getMotivationalMessage","style","marginTop","children","className","onSubmit","for","type","id","value","onChange","target","placeholder","color","onClick","length","height","marginBottom","fontSize","fontWeight"],"sources":["C:/Users/dell/OneDrive - University of Technology and Applied Sciences/Desktop/SaveWell_app/client/src/Components/SavingsSummary.js"],"sourcesContent":["// src/Components/SavingsSummary.js\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport { Progress, Input, Button, FormGroup, Label, Form, Spinner } from \"reactstrap\";\n\nconst SavingsSummary = () => {\n  const [entries, setEntries] = useState([]);\n  const [goal, setGoal] = useState(1000);\n  const [newGoal, setNewGoal] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const userEmail = useSelector((state) => state.users.user.email);\n\n  useEffect(() => {\n    const fetchSavings = async () => {\n      try {\n        setLoading(true);\n        if (userEmail) {\n          const response = await axios.get(`http://localhost:3001/getUserSavings/${userEmail}`);\n          setEntries(response.data);\n        }\n      } catch (error) {\n        console.error(\"Error fetching savings data:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSavings();\n\n    const savedGoal = localStorage.getItem(`goal_${userEmail}`);\n    if (savedGoal) setGoal(Number(savedGoal));\n  }, [userEmail]);\n\n  const totalRemaining = entries.reduce((acc, curr) => acc + Number(curr.remaining), 0);\n\n  const progress = goal ? ((totalRemaining / goal) * 100).toFixed(2) : 0;\n\n  const handleGoalSubmit = (e) => {\n    e.preventDefault();\n    if (newGoal > 0) {\n      setGoal(Number(newGoal));\n      localStorage.setItem(`goal_${userEmail}`, newGoal);\n      setNewGoal(\"\");\n    } else {\n      alert(\"Please enter a valid goal greater than 0.\");\n    }\n  };\n\n  const handleResetGoal = () => {\n    localStorage.removeItem(`goal_${userEmail}`);\n    setGoal(1000);\n    alert(\"Goal has been reset to 1000 OMR üêë.\");\n  };\n\n  const getMotivationalMessage = () => {\n    if (progress >= 100) {\n      return \"üéâ Baaa-rilliant! Goal reached! üêëüèÜ\";\n    } else if (progress >= 75) {\n      return \"üí™ Almost there! Keep shepherding your savings!\";\n    } else if (progress >= 50) {\n      return \"‚ú® Good progress! Stay woolly and focused!\";\n    } else {\n      return \"üöÄ Keep going, little sheep! üêë You can do it!\";\n    }\n  };\n\n  return (\n    <div style={{ marginTop: \"30px\" }}>\n      <h2 className=\"mb-4\">üêë Savings Summary</h2>\n\n      <Form onSubmit={handleGoalSubmit}>\n        <FormGroup>\n          <Label for=\"goal\" className=\"mb-2\">\n            <strong>Set Your Sheep Savings Goal (OMR):</strong>\n          </Label>\n          <Input\n            type=\"number\"\n            id=\"goal\"\n            value={newGoal}\n            onChange={(e) => setNewGoal(e.target.value)}\n            placeholder=\"Enter your new goal...\"\n          />\n        </FormGroup>\n        <Button color=\"primary\" type=\"submit\" className=\"me-2\">\n          Set Goal\n        </Button>\n        <Button color=\"danger\" type=\"button\" onClick={handleResetGoal}>\n          Reset Goal\n        </Button>\n      </Form>\n\n      <hr />\n\n      {loading ? (\n        <div className=\"text-center\">\n          <Spinner color=\"primary\" />\n        </div>\n      ) : entries.length === 0 ? (\n        <p className=\"text-center\">No savings data yet. Start saving to see your progress! üêë</p>\n      ) : (\n        <>\n          <p><strong>Total Remaining Saved:</strong> OMR {totalRemaining.toFixed(2)}</p>\n          <p><strong>Goal Progress:</strong> {progress}%</p>\n\n          <Progress\n            value={progress}\n            color={\n              progress >= 100 ? \"success\" :\n              progress >= 75 ? \"info\" :\n              progress >= 50 ? \"warning\" :\n              \"danger\"\n            }\n            style={{ height: \"25px\", marginBottom: \"10px\" }}\n          >\n            {progress}% toward üêë goal of {goal} OMR\n          </Progress>\n\n          <p style={{ fontSize: \"18px\", fontWeight: \"bold\", color: \"#4CAF50\", marginTop: \"10px\" }}>\n            {getMotivationalMessage()}\n          </p>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default SavingsSummary;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}