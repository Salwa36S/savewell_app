{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{updateUserProfile}from\"../Features/UserSlice\";import{Container,Row,Col,Form,FormGroup,Label,Input,Button,Spinner,Card,CardBody}from\"reactstrap\";import Location from\"./Location\";import defaultProfileImage from\"../Images/profile.png\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const dispatch=useDispatch();const{user,isLoading}=useSelector(state=>state.users);const[preview,setPreview]=useState(null);const[submitted,setSubmitted]=useState(false);const handleSubmit=e=>{e.preventDefault();const file=e.target.profilePic.files[0];if(!file)return alert(\"Please choose an image\");const formData=new FormData();formData.append(\"email\",user.email);formData.append(\"name\",user.name);formData.append(\"profilePic\",file);dispatch(updateUserProfile(formData));setSubmitted(true);};useEffect(()=>{if(submitted&&user!==null&&user!==void 0&&user.profilePic){setPreview(`http://localhost:3001/uploads/${user.profilePic}`);}},[submitted,user]);const imageToDisplay=preview||(user!==null&&user!==void 0&&user.profilePic?`http://localhost:3001/uploads/${user.profilePic}`:defaultProfileImage);return/*#__PURE__*/_jsx(Container,{className:\"my-5\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Card,{className:\"p-4 userdisplay\",children:/*#__PURE__*/_jsxs(CardBody,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"register-title\",children:\"\\uD83D\\uDC64 Your Profile\"}),/*#__PURE__*/_jsx(\"img\",{src:imageToDisplay,alt:\"Profile\",className:\"profileImage\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",user===null||user===void 0?void 0:user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user===null||user===void 0?void 0:user.email]}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"profilePic\",children:\"Update Profile Picture\"}),/*#__PURE__*/_jsx(Input,{type:\"file\",id:\"profilePic\",name:\"profilePic\",accept:\"image/*\",onChange:e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>setPreview(reader.result);reader.readAsDataURL(file);}}})]}),/*#__PURE__*/_jsx(Button,{color:\"success\",block:true,type:\"submit\",disabled:isLoading,children:isLoading?/*#__PURE__*/_jsx(Spinner,{size:\"sm\"}):\"Upload Image\"})]})]})})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Card,{className:\"p-4 locationDisplay\",children:/*#__PURE__*/_jsxs(CardBody,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"register-title\",children:\"\\uD83D\\uDCCD Your Location Info\"}),/*#__PURE__*/_jsx(Location,{})]})})})]})});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","updateUserProfile","Container","Row","Col","Form","FormGroup","Label","Input","Button","Spinner","Card","CardBody","Location","defaultProfileImage","jsx","_jsx","jsxs","_jsxs","Profile","dispatch","user","isLoading","state","users","preview","setPreview","submitted","setSubmitted","handleSubmit","e","preventDefault","file","target","profilePic","files","alert","formData","FormData","append","email","name","imageToDisplay","className","children","md","src","alt","onSubmit","encType","for","type","id","accept","onChange","reader","FileReader","onloadend","result","readAsDataURL","color","block","disabled","size"],"sources":["C:/Users/dell/OneDrive - University of Technology and Applied Sciences/Desktop/SaveWell_app/client/src/Components/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { updateUserProfile } from \"../Features/UserSlice\";\r\nimport {\r\n  Container, Row, Col, Form, FormGroup, Label,\r\n  Input, Button, Spinner, Card, CardBody\r\n} from \"reactstrap\";\r\nimport Location from \"./Location\";\r\nimport defaultProfileImage from \"../Images/profile.png\";\r\n\r\nconst Profile = () => {\r\n  const dispatch = useDispatch();\r\n  const { user, isLoading } = useSelector((state) => state.users);\r\n  const [preview, setPreview] = useState(null);\r\n  const [submitted, setSubmitted] = useState(false);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const file = e.target.profilePic.files[0];\r\n    if (!file) return alert(\"Please choose an image\");\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"email\", user.email);\r\n    formData.append(\"name\", user.name);\r\n    formData.append(\"profilePic\", file);\r\n\r\n    dispatch(updateUserProfile(formData));\r\n    setSubmitted(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (submitted && user?.profilePic) {\r\n      setPreview(`http://localhost:3001/uploads/${user.profilePic}`);\r\n    }\r\n  }, [submitted, user]);\r\n\r\n  const imageToDisplay = preview || (user?.profilePic\r\n    ? `http://localhost:3001/uploads/${user.profilePic}`\r\n    : defaultProfileImage);\r\n\r\n  return (\r\n    <Container className=\"my-5\">\r\n      <Row>\r\n        {/* LEFT: User Profile */}\r\n        <Col md={6}>\r\n          <Card className=\"p-4 userdisplay\">\r\n            <CardBody className=\"text-center\">\r\n              <h3 className=\"register-title\">üë§ Your Profile</h3>\r\n              <img\r\n                src={imageToDisplay}\r\n                alt=\"Profile\"\r\n                className=\"profileImage\"\r\n              />\r\n              <p><strong>Name:</strong> {user?.name}</p>\r\n              <p><strong>Email:</strong> {user?.email}</p>\r\n\r\n              {/* üì∏ Upload image */}\r\n              <Form onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n                <FormGroup>\r\n                  <Label for=\"profilePic\">Update Profile Picture</Label>\r\n                  <Input\r\n                    type=\"file\"\r\n                    id=\"profilePic\"\r\n                    name=\"profilePic\"\r\n                    accept=\"image/*\"\r\n                    onChange={(e) => {\r\n                      const file = e.target.files[0];\r\n                      if (file) {\r\n                        const reader = new FileReader();\r\n                        reader.onloadend = () => setPreview(reader.result);\r\n                        reader.readAsDataURL(file);\r\n                      }\r\n                    }}\r\n                  />\r\n                </FormGroup>\r\n\r\n                <Button color=\"success\" block type=\"submit\" disabled={isLoading}>\r\n                  {isLoading ? <Spinner size=\"sm\" /> : \"Upload Image\"}\r\n                </Button>\r\n              </Form>\r\n            </CardBody>\r\n          </Card>\r\n        </Col>\r\n\r\n        {/* RIGHT: Location Info */}\r\n        <Col md={6}>\r\n          <Card className=\"p-4 locationDisplay\">\r\n            <CardBody className=\"text-center\">\r\n              <h3 className=\"register-title\">üìç Your Location Info</h3>\r\n              <Location />\r\n            </CardBody>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}