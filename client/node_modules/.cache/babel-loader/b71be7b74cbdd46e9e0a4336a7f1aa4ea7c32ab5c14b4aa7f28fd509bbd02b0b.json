{"ast":null,"code":"// client/src/Features/UserSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\n// Initial state\nconst initialState = {\n  user: {},\n  isLoading: false,\n  isSuccess: false,\n  isError: false,\n  errorMessage: \"\"\n};\n\n// Thunk for user registration\nexport const registerUser = createAsyncThunk(\"users/registerUser\", async (userData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(\"http://localhost:3001/registerUser\", userData);\n    return response.data.user;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    return rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message);\n  }\n});\n\n// Thunk for user login\nexport const login = createAsyncThunk(\"users/login\", async (userData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(\"http://localhost:3001/login\", userData);\n    return response.data.user;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Invalid credentials\");\n  }\n});\n\n// Thunk for updating user profile\nexport const updateUserProfile = createAsyncThunk(\"users/updateUserProfile\", async (userData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.put(`http://localhost:3001/updateUserProfile/${userData.email}`, userData, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return response.data.user;\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    return rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || \"Profile update failed\");\n  }\n});\n\n// âœ… Corrected User slice\nexport const userSlice = createSlice({\n  name: \"users\",\n  initialState,\n  reducers: {\n    // ðŸ›  Add this logout reducer\n    logout: state => {\n      state.user = {};\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = false;\n      state.errorMessage = \"\";\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(registerUser.pending, state => {\n      state.isLoading = true;\n    }).addCase(registerUser.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.user = action.payload;\n    }).addCase(registerUser.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    }).addCase(login.pending, state => {\n      state.isLoading = true;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.user = action.payload;\n    }).addCase(login.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    }).addCase(updateUserProfile.pending, state => {\n      state.isLoading = true;\n    }).addCase(updateUserProfile.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.user = action.payload;\n    }).addCase(updateUserProfile.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    });\n  }\n});\n\n// âœ… Export logout also\nexport const {\n  logout\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","user","isLoading","isSuccess","isError","errorMessage","registerUser","userData","rejectWithValue","response","post","data","error","_error$response","_error$response$data","message","login","_error$response2","_error$response2$data","updateUserProfile","put","email","headers","_error$response3","_error$response3$data","userSlice","name","reducers","logout","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/dell/OneDrive - University of Technology and Applied Sciences/Desktop/SaveWell_app/client/src/Features/UserSlice.js"],"sourcesContent":["// client/src/Features/UserSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\n// Initial state\nconst initialState = {\n  user: {},\n  isLoading: false,\n  isSuccess: false,\n  isError: false,\n  errorMessage: \"\",\n};\n\n// Thunk for user registration\nexport const registerUser = createAsyncThunk(\n  \"users/registerUser\",\n  async (userData, { rejectWithValue }) => {\n    try {\n      const response = await axios.post(\"http://localhost:3001/registerUser\", userData);\n      return response.data.user;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || error.message);\n    }\n  }\n);\n\n// Thunk for user login\nexport const login = createAsyncThunk(\n  \"users/login\",\n  async (userData, { rejectWithValue }) => {\n    try {\n      const response = await axios.post(\"http://localhost:3001/login\", userData);\n      return response.data.user;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || \"Invalid credentials\");\n    }\n  }\n);\n\n// Thunk for updating user profile\nexport const updateUserProfile = createAsyncThunk(\n  \"users/updateUserProfile\",\n  async (userData, { rejectWithValue }) => {\n    try {\n      const response = await axios.put(\n        `http://localhost:3001/updateUserProfile/${userData.email}`,\n        userData,\n        { headers: { \"Content-Type\": \"application/json\" } }\n      );\n      return response.data.user;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || \"Profile update failed\");\n    }\n  }\n);\n\n// âœ… Corrected User slice\nexport const userSlice = createSlice({\n  name: \"users\",\n  initialState,\n  reducers: {\n    // ðŸ›  Add this logout reducer\n    logout: (state) => {\n      state.user = {};\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = false;\n      state.errorMessage = \"\";\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(registerUser.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(registerUser.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.user = action.payload;\n      })\n      .addCase(registerUser.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.errorMessage = action.payload;\n      })\n\n      .addCase(login.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.user = action.payload;\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.errorMessage = action.payload;\n      })\n\n      .addCase(updateUserProfile.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(updateUserProfile.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.user = action.payload;\n      })\n      .addCase(updateUserProfile.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.errorMessage = action.payload;\n      });\n  },\n});\n\n// âœ… Export logout also\nexport const { logout } = userSlice.actions;\n\nexport default userSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}