{"ast":null,"code":"// src/Components/Home.js\nimport React,{useEffect,useState}from\"react\";import{Container,Row,Col,Button,Input,FormGroup,Label,Form,Card,CardBody,CardTitle,CardText,Progress,Spinner}from\"reactstrap\";import{useNavigate}from\"react-router-dom\";import{useSelector}from\"react-redux\";import axios from\"axios\";import backgroundImage from\"../Images/backgroud.jpg\";import\"../App.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Home=()=>{const navigate=useNavigate();const userEmail=useSelector(state=>state.users.user.email);const userName=useSelector(state=>state.users.user.name);const[salary,setSalary]=useState(\"\");const[electricity,setElectricity]=useState(\"\");const[water,setWater]=useState(\"\");const[household,setHousehold]=useState(\"\");const[personal,setPersonal]=useState(\"\");const[totalRemaining,setTotalRemaining]=useState(0);const[loading,setLoading]=useState(false);const[goal,setGoal]=useState(1000);useEffect(()=>{const fetchSavings=async()=>{try{setLoading(true);if(userEmail){const response=await axios.get(`http://localhost:3001/getUserSavings/${userEmail}`);const total=response.data.reduce((acc,item)=>acc+Number(item.remaining),0);setTotalRemaining(total);}}catch(error){console.error(\"Error fetching your savings\",error);}finally{setLoading(false);}};fetchSavings();const userGoal=localStorage.getItem(`goal_${userEmail}`);if(userGoal)setGoal(Number(userGoal));},[userEmail]);const handleSave=async e=>{e.preventDefault();const totalExpenses=+electricity+ +water+ +household+ +personal;const remaining=+salary-totalExpenses;const cleanUserName=(userName||\"Anonymous\").trim();const cleanUserEmail=userEmail.trim();const newEntry={userName:cleanUserName,userEmail:cleanUserEmail,salary,electricity,water,household,personal,totalExpenses,remaining};try{await axios.post(\"http://localhost:3001/submitSaving\",newEntry);alert(\"‚úÖ Saving submitted successfully!\");setSalary(\"\");setElectricity(\"\");setWater(\"\");setHousehold(\"\");setPersonal(\"\");navigate(\"/savings\");}catch(error){console.error(\"Saving error:\",error);alert(\"‚ùå Error submitting saving. Try again.\");}};const progress=goal?(totalRemaining/goal*100).toFixed(2):0;return/*#__PURE__*/_jsx(\"div\",{className:\"register-background\",style:{backgroundImage:`url(${backgroundImage})`},children:/*#__PURE__*/_jsx(Container,{className:\"register-page py-5\",children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{lg:12,children:[/*#__PURE__*/_jsx(Card,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(CardTitle,{tag:\"h5\",children:\"\\uD83D\\uDC11 Your Sheep Bank\"}),loading?/*#__PURE__*/_jsx(Spinner,{color:\"primary\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(CardText,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Remaining Saved:\"}),\" OMR \",totalRemaining.toFixed(2)]}),/*#__PURE__*/_jsxs(Progress,{value:progress,className:\"mt-3\",color:progress>=100?\"success\":progress>=75?\"info\":progress>=50?\"warning\":\"danger\",children:[progress,\"% toward \",goal,\" OMR Goal\"]})]})]})}),/*#__PURE__*/_jsx(Button,{color:\"info\",className:\"mb-4\",onClick:()=>navigate(\"/savings\"),children:\"\\uD83D\\uDCC4 View All Savings\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"Monthly Budget Form\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSave,children:[[{label:\"Monthly Salary\",value:salary,setter:setSalary},{label:\"Electricity Bill\",value:electricity,setter:setElectricity},{label:\"Water Bill\",value:water,setter:setWater},{label:\"Household Expenses\",value:household,setter:setHousehold},{label:\"Personal Use\",value:personal,setter:setPersonal}].map((_ref,idx)=>{let{label,value,setter}=_ref;return/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:label}),/*#__PURE__*/_jsx(Input,{type:\"number\",value:value,onChange:e=>setter(e.target.value),required:true})]},idx);}),/*#__PURE__*/_jsx(Button,{color:\"success\",block:true,type:\"submit\",children:\"Save\"})]})]})})})});};export default Home;","map":{"version":3,"names":["React","useEffect","useState","Container","Row","Col","Button","Input","FormGroup","Label","Form","Card","CardBody","CardTitle","CardText","Progress","Spinner","useNavigate","useSelector","axios","backgroundImage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","navigate","userEmail","state","users","user","email","userName","name","salary","setSalary","electricity","setElectricity","water","setWater","household","setHousehold","personal","setPersonal","totalRemaining","setTotalRemaining","loading","setLoading","goal","setGoal","fetchSavings","response","get","total","data","reduce","acc","item","Number","remaining","error","console","userGoal","localStorage","getItem","handleSave","e","preventDefault","totalExpenses","cleanUserName","trim","cleanUserEmail","newEntry","post","alert","progress","toFixed","className","style","children","lg","tag","color","value","onClick","onSubmit","label","setter","map","_ref","idx","type","onChange","target","required","block"],"sources":["C:/Users/dell/OneDrive - University of Technology and Applied Sciences/Desktop/SaveWell_app/client/src/Components/Home.js"],"sourcesContent":["// src/Components/Home.js\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  Container, Row, Col, Button, Input,\n  FormGroup, Label, Form, Card, CardBody,\n  CardTitle, CardText, Progress, Spinner\n} from \"reactstrap\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport backgroundImage from \"../Images/backgroud.jpg\";\nimport \"../App.css\";\n\nconst Home = () => {\n  const navigate = useNavigate();\n  const userEmail = useSelector((state) => state.users.user.email);\n  const userName = useSelector((state) => state.users.user.name);\n\n  const [salary, setSalary] = useState(\"\");\n  const [electricity, setElectricity] = useState(\"\");\n  const [water, setWater] = useState(\"\");\n  const [household, setHousehold] = useState(\"\");\n  const [personal, setPersonal] = useState(\"\");\n  const [totalRemaining, setTotalRemaining] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [goal, setGoal] = useState(1000);\n\n  useEffect(() => {\n    const fetchSavings = async () => {\n      try {\n        setLoading(true);\n        if (userEmail) {\n          const response = await axios.get(`http://localhost:3001/getUserSavings/${userEmail}`);\n          const total = response.data.reduce((acc, item) => acc + Number(item.remaining), 0);\n          setTotalRemaining(total);\n        }\n      } catch (error) {\n        console.error(\"Error fetching your savings\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSavings();\n    const userGoal = localStorage.getItem(`goal_${userEmail}`);\n    if (userGoal) setGoal(Number(userGoal));\n  }, [userEmail]);\n\n  const handleSave = async (e) => {\n    e.preventDefault();\n    const totalExpenses = +electricity + +water + +household + +personal;\n    const remaining = +salary - totalExpenses;\n\n    const cleanUserName = (userName || \"Anonymous\").trim();\n    const cleanUserEmail = userEmail.trim();\n\n    const newEntry = {\n      userName: cleanUserName,\n      userEmail: cleanUserEmail,\n      salary,\n      electricity,\n      water,\n      household,\n      personal,\n      totalExpenses,\n      remaining,\n    };\n\n    try {\n      await axios.post(\"http://localhost:3001/submitSaving\", newEntry);\n      alert(\"‚úÖ Saving submitted successfully!\");\n\n      setSalary(\"\");\n      setElectricity(\"\");\n      setWater(\"\");\n      setHousehold(\"\");\n      setPersonal(\"\");\n\n      navigate(\"/savings\");\n    } catch (error) {\n      console.error(\"Saving error:\", error);\n      alert(\"‚ùå Error submitting saving. Try again.\");\n    }\n  };\n\n  const progress = goal ? ((totalRemaining / goal) * 100).toFixed(2) : 0;\n\n  return (\n    <div\n      className=\"register-background\"\n      style={{ backgroundImage: `url(${backgroundImage})` }}\n    >\n      <Container className=\"register-page py-5\">\n        <Row>\n          <Col lg={12}>\n            <Card className=\"mb-4\">\n              <CardBody>\n                <CardTitle tag=\"h5\">üêë Your Sheep Bank</CardTitle>\n                {loading ? (\n                  <Spinner color=\"primary\" />\n                ) : (\n                  <>\n                    <CardText><strong>Total Remaining Saved:</strong> OMR {totalRemaining.toFixed(2)}</CardText>\n                    <Progress\n                      value={progress}\n                      className=\"mt-3\"\n                      color={progress >= 100 ? \"success\" : progress >= 75 ? \"info\" : progress >= 50 ? \"warning\" : \"danger\"}\n                    >\n                      {progress}% toward {goal} OMR Goal\n                    </Progress>\n                  </>\n                )}\n              </CardBody>\n            </Card>\n\n            <Button color=\"info\" className=\"mb-4\" onClick={() => navigate(\"/savings\")}>\n              üìÑ View All Savings\n            </Button>\n\n            <h2 className=\"mb-4\">Monthly Budget Form</h2>\n            <Form onSubmit={handleSave}>\n              {[\n                { label: \"Monthly Salary\", value: salary, setter: setSalary },\n                { label: \"Electricity Bill\", value: electricity, setter: setElectricity },\n                { label: \"Water Bill\", value: water, setter: setWater },\n                { label: \"Household Expenses\", value: household, setter: setHousehold },\n                { label: \"Personal Use\", value: personal, setter: setPersonal },\n              ].map(({ label, value, setter }, idx) => (\n                <FormGroup key={idx}>\n                  <Label>{label}</Label>\n                  <Input type=\"number\" value={value} onChange={(e) => setter(e.target.value)} required />\n                </FormGroup>\n              ))}\n\n              <Button color=\"success\" block type=\"submit\">\n                Save\n              </Button>\n            </Form>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}