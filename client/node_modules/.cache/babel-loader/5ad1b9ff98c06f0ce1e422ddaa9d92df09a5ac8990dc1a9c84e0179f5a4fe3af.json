{"ast":null,"code":"// src/Components/SavingsForm.js\nimport React,{useEffect,useState}from\"react\";import{Container,Row,Col,Card,CardBody,CardTitle,CardText,Button,Spinner}from\"reactstrap\";import{useSelector}from\"react-redux\";import{useLocation}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SavingsForm=()=>{const[entries,setEntries]=useState([]);const[likedSavings,setLikedSavings]=useState([]);const[loading,setLoading]=useState(false);const userEmail=useSelector(state=>state.users.user.email);const location=useLocation();useEffect(()=>{const fetchData=async()=>{try{setLoading(true);if(userEmail){const[savingsResponse,likesResponse]=await Promise.all([axios.get(`http://localhost:3001/getUserSavings/${userEmail}`),axios.get(`http://localhost:3001/getLikedSavings/${userEmail}`)]);setEntries(savingsResponse.data);setLikedSavings(likesResponse.data.map(like=>like.savingId._id));}}catch(error){console.error(\"Error fetching data:\",error);}finally{setLoading(false);}};fetchData();},[userEmail,location]);const toggleLike=async savingId=>{try{if(likedSavings.includes(savingId)){await axios.delete(\"http://localhost:3001/unlikeSaving\",{data:{userEmail,savingId}});setLikedSavings(likedSavings.filter(id=>id!==savingId));}else{await axios.post(\"http://localhost:3001/likeSaving\",{userEmail,savingId});setLikedSavings([...likedSavings,savingId]);}}catch(error){console.error(\"Error toggling like:\",error);}};return/*#__PURE__*/_jsx(Container,{className:\"mt-5\",children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"\\uD83D\\uDC11 Your Sheep Savings\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Spinner,{color:\"primary\"})}):entries.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"No savings submitted yet. \\uD83D\\uDC11\"}):entries.map((entry,index)=>/*#__PURE__*/_jsx(Card,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(CardTitle,{tag:\"h5\",children:[\"Saving #\",index+1]}),[[\"Monthly Salary\",entry.salary],[\"Electricity Bill\",entry.electricity],[\"Water Bill\",entry.water],[\"Household Expenses\",entry.household],[\"Personal Use\",entry.personal],[\"Total Expenses\",entry.totalExpenses],[\"Remaining Salary\",entry.remaining]].map((_ref,idx)=>{let[label,value]=_ref;return/*#__PURE__*/_jsxs(CardText,{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[label,\":\"]}),\" OMR \",value]},idx);}),/*#__PURE__*/_jsx(Button,{color:likedSavings.includes(entry._id)?\"danger\":\"secondary\",onClick:()=>toggleLike(entry._id),className:\"mt-2\",children:likedSavings.includes(entry._id)?\"‚ù§Ô∏è Liked\":\"ü§ç Like\"})]})},entry._id))]})})});};export default SavingsForm;","map":{"version":3,"names":["React","useEffect","useState","Container","Row","Col","Card","CardBody","CardTitle","CardText","Button","Spinner","useSelector","useLocation","axios","jsx","_jsx","jsxs","_jsxs","SavingsForm","entries","setEntries","likedSavings","setLikedSavings","loading","setLoading","userEmail","state","users","user","email","location","fetchData","savingsResponse","likesResponse","Promise","all","get","data","map","like","savingId","_id","error","console","toggleLike","includes","delete","filter","id","post","className","children","color","length","entry","index","tag","salary","electricity","water","household","personal","totalExpenses","remaining","_ref","idx","label","value","onClick"],"sources":["C:/Users/dell/OneDrive - University of Technology and Applied Sciences/Desktop/SaveWell_app/client/src/Components/SavingsForm.js"],"sourcesContent":["// src/Components/SavingsForm.js\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  Container, Row, Col, Card, CardBody, CardTitle, CardText, Button, Spinner\n} from \"reactstrap\";\nimport { useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst SavingsForm = () => {\n  const [entries, setEntries] = useState([]);\n  const [likedSavings, setLikedSavings] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const userEmail = useSelector((state) => state.users.user.email);\n  const location = useLocation();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        if (userEmail) {\n          const [savingsResponse, likesResponse] = await Promise.all([\n            axios.get(`http://localhost:3001/getUserSavings/${userEmail}`),\n            axios.get(`http://localhost:3001/getLikedSavings/${userEmail}`),\n          ]);\n          setEntries(savingsResponse.data);\n          setLikedSavings(likesResponse.data.map((like) => like.savingId._id));\n        }\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [userEmail, location]);\n\n  const toggleLike = async (savingId) => {\n    try {\n      if (likedSavings.includes(savingId)) {\n        await axios.delete(\"http://localhost:3001/unlikeSaving\", { data: { userEmail, savingId } });\n        setLikedSavings(likedSavings.filter((id) => id !== savingId));\n      } else {\n        await axios.post(\"http://localhost:3001/likeSaving\", { userEmail, savingId });\n        setLikedSavings([...likedSavings, savingId]);\n      }\n    } catch (error) {\n      console.error(\"Error toggling like:\", error);\n    }\n  };\n\n  return (\n    <Container className=\"mt-5\">\n      <Row>\n        <Col>\n          <h2 className=\"mb-4\">üêë Your Sheep Savings</h2>\n\n          {loading ? (\n            <div className=\"text-center\"><Spinner color=\"primary\" /></div>\n          ) : entries.length === 0 ? (\n            <p className=\"text-center\">No savings submitted yet. üêë</p>\n          ) : (\n            entries.map((entry, index) => (\n              <Card className=\"mb-3\" key={entry._id}>\n                <CardBody>\n                  <CardTitle tag=\"h5\">Saving #{index + 1}</CardTitle>\n\n                  {[\n                    [\"Monthly Salary\", entry.salary],\n                    [\"Electricity Bill\", entry.electricity],\n                    [\"Water Bill\", entry.water],\n                    [\"Household Expenses\", entry.household],\n                    [\"Personal Use\", entry.personal],\n                    [\"Total Expenses\", entry.totalExpenses],\n                    [\"Remaining Salary\", entry.remaining],\n                  ].map(([label, value], idx) => (\n                    <CardText key={idx}><strong>{label}:</strong> OMR {value}</CardText>\n                  ))}\n\n                  <Button\n                    color={likedSavings.includes(entry._id) ? \"danger\" : \"secondary\"}\n                    onClick={() => toggleLike(entry._id)}\n                    className=\"mt-2\"\n                  >\n                    {likedSavings.includes(entry._id) ? \"‚ù§Ô∏è Liked\" : \"ü§ç Like\"}\n                  </Button>\n                </CardBody>\n              </Card>\n            ))\n          )}\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default SavingsForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}